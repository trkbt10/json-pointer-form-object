"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function w(e){const t=e.slice(0,-1),n=e.at(-1);return[t,n]}function N(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function H(e,t){return b(e)?Object.prototype.hasOwnProperty.call(e,t):!1}function b(e){return typeof e=="object"&&e!==null}function m(e){return Array.isArray(e)?[...e]:b(e)?{...e}:e}function A(e){return typeof e=="number"?A(e.toString()):e.replace(/~/g,"~0").replace(/\//g,"~1")}function I(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function y(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return y(t)}return e.split("/").map(I)}function D(e,t){return typeof g(e,t,()=>{})<"u"}function M(e,t){if(e.length===0)return"";const n=e.map(A).join("/"),r=n.startsWith("/")?"":"/";return t==="uri"?`#${r}${encodeURIComponent(n)}`:r+n}function g(e,t,n){const[r,...i]=y(t);if((r===void 0||r==="")&&i.length===0)return n&&n(e,"",void 0,[]),e;let o=e,f;for(const u of i){if(N(u))throw new Error("Prototype pollution attempt");if(!H(o,u)){if(n){o=void 0;break}throw new Error(`Cannot find ${u} in ${JSON.stringify(o)}`)}f=o,o=o[u]}if(n){const[u,a]=w(i);n(o,a,f,u)}return o}function P(e,t){return g(e,t)}function E(e,t,n){let r=m(e);return g(e,t,(i,o,f,u)=>{var a;if(i===n)return;const s=u.length;let c=0,l=r;do{const p=u[c],d=c>=s;if(d&&Array.isArray(l)){o==="-"?l.push(n):l[+o]=n;return}if(d&&o===""){r=n;return}if(d){l[o]=n;return}const L=(a=l[p])!=null?a:{};l[p]=m(L),l=l[p]}while(++c<=s)}),r}const F=new Set(["INPUT","TEXTAREA","SELECT","FIELDSET"]);function v(e){const t=[];for(const n of Array.from(e.children))F.has(n.nodeName)?t.push(n):t.push(...v(n));return t}function O(e){return!!(e.hasAttribute("disabled")||e.ariaDisabled==="true")}function C(e){return typeof HTMLFieldSetElement>"u"?(e==null?void 0:e.tagName)==="FIELDSET":e instanceof HTMLFieldSetElement}function S(e){return typeof HTMLInputElement>"u"?(e==null?void 0:e.tagName)==="INPUT":e instanceof HTMLInputElement}function $(e){return typeof HTMLSelectElement>"u"?(e==null?void 0:e.tagName)==="SELECT":e instanceof HTMLSelectElement}function j(e){return typeof HTMLTextAreaElement>"u"?(e==null?void 0:e.tagName)==="TEXTAREA":e instanceof HTMLTextAreaElement}function k(e){return S(e)?e.type==="date"||e.type==="datetime-local"||e.type==="month"||e.type==="time":!1}function R(e){if(typeof e=="string")return new Date(e);if(typeof e=="number")return new Date(e);if(e instanceof Date)return e}function T(e){if(typeof e=="string")return+e;if(typeof e=="number")return e;if(e instanceof Date)return e.getTime()}function x(e){if(e.type==="checkbox")return e.checked;if(e.type==="radio")return e.checked?e.value:void 0;if(e.type==="file"){const t=e.files||[];return e.multiple?t:t[0]??null}return k(e)?R(e.value):e.type==="number"||e.type==="range"?T(e.value):e.value}function _(e,t){const n=y(e);for(let r=n.length;r>=0;r--){const i=M(n.slice(0,r));try{if(D(t,i))return i}catch{continue}}throw new Error("No valid pointer found")}function h(e,t){const n=W(t==null?void 0:t.conflictResolver);return v(e).reduce((r,i)=>{if(O(i))return r;if(C(i)){const u=h(i,t);return{...r,...u}}const o=`${i.name.startsWith("/")?"":"/"}${i.name}`;if(S(i)){const u=x(i);return typeof u>"u"?r:n(r,o,u)}if(j(i))return n(r,o,i.value);if($(i)){if(i.multiple){const u=Array.from(i.selectedOptions).map(a=>a.value);return n(r,o,u)}return n(r,o,i.value)}const f=i.getAttribute("value");return f?n(r,o,f):r},{})}const U=(e,t,n,r,i)=>({...{"#":n},...r});function W(e=U){return(t,n,r)=>{try{return E(t,n,r)}catch(i){if(e){const o=_(n,t),f=n.slice(o.length),u=E({},f,r),a=P(t,o),s=e(n,t,a,u,f);return E(t,f,s)}throw i}}}function X(e){return t=>{if(!(t.target instanceof HTMLFormElement))return;t.preventDefault();const n=h(t.target);e(n)}}exports.createFormEventHandler=X;exports.formToObject=h;
