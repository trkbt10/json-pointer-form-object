"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function w(e){const t=e.slice(0,-1),n=e.at(-1);return[t,n]}function N(e){return e==="__proto__"||e==="constructor"||e==="prototype"}function H(e,t){return b(e)?Object.prototype.hasOwnProperty.call(e,t):!1}function b(e){return typeof e=="object"&&e!==null}function m(e){return Array.isArray(e)?[...e]:b(e)?{...e}:e}function A(e){return typeof e=="number"?A(e.toString()):e.replace(/~/g,"~0").replace(/\//g,"~1")}function I(e){return e.replace(/\~1/g,"/").replace(/\~0/g,"~")}function y(e){if(e.startsWith("#")){const t=decodeURIComponent(e).replace(/^#/,"");return y(t)}return e.split("/").map(I)}function D(e,t){return typeof g(e,t,()=>{})<"u"}function M(e,t){if(e.length===0)return"";const n=e.map(A).join("/"),i=n.startsWith("/")?"":"/";return t==="uri"?`#${i}${encodeURIComponent(n)}`:i+n}function g(e,t,n){const[i,...u]=y(t);if((i===void 0||i==="")&&u.length===0)return n&&n(e,"",void 0,[]),e;let r=e,a;for(const f of u){if(N(f))throw new Error("Prototype pollution attempt");if(!H(r,f)){if(n){r=void 0;break}throw new Error(`Cannot find ${f} in ${JSON.stringify(r)}`)}a=r,r=r[f]}if(n){const[f,o]=w(u);n(r,o,a,f)}return r}function P(e,t){return g(e,t)}function E(e,t,n){let i=m(e);return g(e,t,(u,r,a,f)=>{var o;if(u===n)return;const c=f.length;let l=0,s=i;do{const p=f[l],d=l>=c;if(d&&Array.isArray(s)){r==="-"?s.push(n):s[+r]=n;return}if(d&&r===""){i=n;return}if(d){s[r]=n;return}const L=(o=s[p])!=null?o:{};s[p]=m(L),s=s[p]}while(++l<=c)}),i}const F=new Set(["INPUT","TEXTAREA","SELECT","FIELDSET"]);function v(e){const t=[];for(const n of Array.from(e.children))F.has(n.nodeName)?t.push(n):t.push(...v(n));return t}function O(e){return!!(e.hasAttribute("disabled")||e.ariaDisabled==="true")}function x(e){return typeof HTMLFieldSetElement>"u"?(e==null?void 0:e.tagName)==="FIELDSET":e instanceof HTMLFieldSetElement}function S(e){return typeof HTMLInputElement>"u"?(e==null?void 0:e.tagName)==="INPUT":e instanceof HTMLInputElement}function C(e){return typeof HTMLSelectElement>"u"?(e==null?void 0:e.tagName)==="SELECT":e instanceof HTMLSelectElement}function $(e){return typeof HTMLTextAreaElement>"u"?(e==null?void 0:e.tagName)==="TEXTAREA":e instanceof HTMLTextAreaElement}function j(e){return S(e)?e.type==="date"||e.type==="datetime-local"||e.type==="month"||e.type==="time":!1}function k(e){if(typeof e=="string")return new Date(e);if(typeof e=="number")return new Date(e);if(e instanceof Date)return e}function T(e){if(typeof e=="string")return+e;if(typeof e=="number")return e;if(e instanceof Date)return e.getTime()}function R(e){if(e.type==="checkbox")return e.checked;if(e.type==="radio")return e.checked?e.value:void 0;if(e.type==="file"){const t=e.files||[];return e.multiple?t:t[0]??null}return j(e)?k(e.value):e.type==="number"||e.type==="range"?T(e.value):e.value}function _(e,t){const n=y(e);for(let i=n.length;i>=0;i--){const u=M(n.slice(0,i));try{if(D(t,u))return u}catch{continue}}throw new Error("No valid pointer found")}function h(e,t){const n=(t==null?void 0:t.attribute)??"name",i=W(t==null?void 0:t.conflictResolver);return v(e).reduce((u,r)=>{if(O(r))return u;if(x(r)){const l=h(r,t);return{...u,...l}}const a=r.getAttribute(n);if(!a)return u;const o=`${a.startsWith("/")?"":"/"}${a}`;if(o==="/")return u;if(S(r)){const l=R(r);return typeof l>"u"?u:i(u,o,l)}if($(r))return i(u,o,r.value);if(C(r)){if(r.multiple){const l=Array.from(r.selectedOptions).map(s=>s.value);return i(u,o,l)}return i(u,o,r.value)}const c=r.getAttribute("value");return c?i(u,o,c):u},{})}const U=(e,t,n,i,u)=>({...{"#":n},...i});function W(e=U){return(t,n,i)=>{try{return E(t,n,i)}catch(u){if(e){const r=_(n,t),a=n.slice(r.length),f=E({},a,i),o=P(t,r),c=e(n,t,o,f,a);return E(t,a,c)}throw u}}}function X(e){return t=>{if(!(t.target instanceof HTMLFormElement))return;t.preventDefault();const n=h(t.target);e(n)}}exports.createFormEventHandler=X;exports.formToObject=h;
